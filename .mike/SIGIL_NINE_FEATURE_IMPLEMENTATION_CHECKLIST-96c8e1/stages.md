# Sigil Nine-Feature Implementation — Stages

- [x] 1. Per-App API Key Scoping — Extend existing API key system with app identity model, per-app scopes, rate limits, and admin/CLI UX. Foundation for OAuth provider mode. (completed 2026-02-22)
- [x] 2. OAuth 2.0 Provider Mode — Build authorization server on top of app identity model: client registration, grant types, consent flow, token issuance/revocation/introspection. (completed 2026-02-22)
- [x] 3. Job Queue & Scheduler — General-purpose background processing: recurring jobs, one-off deferred tasks, retries, persistence, crash recovery, multi-instance locking, admin/CLI operations. (completed 2026-02-22: transition review fixed disabled-schedule enqueue race and revalidated Stage 3 focused suites.)
- [x] 4. Data Layer Hardening — Materialized view refresh mechanism (scheduled, on-demand, scheduler-integrated) + joined-table RLS evaluation in SSE for membership-driven visibility. (completed 2026-02-22: matview register/refresh/schedule with advisory lock, concurrent mode with prerequisites, admin API/CLI/dashboard, joined-table RLS SSE verified with integration tests, full docs/specs/trackers updated; transition audit also fixed browser-test lint-hard failures and added dedicated matviews browser-unmocked lifecycle coverage.)
- [x] 5. Custom Email Templates — User-defined HTML template system with variable substitution, template management (config/admin/API), rendering safety, and fallback behavior. (completed 2026-02-22: session 101 review verified all completion gates — false-positive tests fixed, store-error logging added, all focused suites green, Stage 3/4 regression preserved)
- [ ] 6. Push Notifications (FCM/APNS) — Provider-abstracted push channel: device token lifecycle, delivery pipeline with retries, permission model, provider adapters for FCM and APNS.
- [ ] 7. Dart/Flutter SDK — Full client SDK mirroring TypeScript SDK: records CRUD, auth (login/register/OAuth/token refresh), realtime SSE subscriptions, storage (upload/download/signed URLs).
- [ ] 8. PostGIS Extension Support — Geospatial strategy (embedded vs external Postgres), schema/type handling for geometry columns, deployment guidance, migration/introspection coverage.
