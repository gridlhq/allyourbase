#!/bin/bash
set -e

# Run smoke tests on staging environment
# Usage: ./run-smoke-staging.sh

echo "üß™ Running smoke tests on STAGING..."
echo "======================================"
echo "Target: https://staging.allyourbase.io"
echo ""

# Load staging environment
export $(cat e2e/config/.env.staging | xargs)

# Run smoke tests only
npx playwright test --project=smoke

RESULT=$?

if [ $RESULT -eq 0 ]; then
  echo ""
  echo "‚úÖ Staging smoke tests PASSED"
  echo "   Ready to run full suite or deploy to production"
  exit 0
else
  echo ""
  echo "‚ùå Staging smoke tests FAILED"
  echo "   Do NOT deploy to production"
  exit 1
fi
